<!--pages/production/element/element.wxml-->

<!-- 按钮 -->
<view class="button" style="position:absolute;z-index:2;">
  <!-- <button class="return" bindtap="ReturnTap" hover-class='hover'> 返回 </button>
  <button class="submit" bindtap="ResultTap" hover-class='hover'> 完成 </button> -->
  <image mode="aspectFill" src="{{returnimg}}" class="return" bindtap="ReturnTap"></image>
  <image wx:if="{{showFinishbt == true}}" mode="aspectFill" src="{{finishimg}}" class="submit" bindtap="ResultTap"></image>
</view>

<!-- 图片 -->
<!-- 
  问题：位置写死，宽高不一致会挪位置 
  考虑：屏幕位置或固定center宽度
  border:1px solid pink
-->
<view class="center" style='width:80%;height:{{centerheight}}rpx;position:relative;z-index:1;'>

  <block wx:if="{{production == 'C'}}">
    <view style='width:550rpx;height:{{centerheight-160}}rpx;position:absolute;bottom:30rpx;background:#fff'>
      <image mode="aspectFill" src="{{Eimg}}" style='transform:rotate(-90deg);width:750rpx;height:500rpx;left:-100rpx;bottom:{{Eimgbottom}}rpx;position:absolute;'></image>
      <image mode="aspectFill" src="{{Mimg}}" style='transform:rotate(-90deg);width:650rpx;height:400rpx;position:absolute;left:-50rpx;bottom:{{Eimgbottom+50}}rpx;'></image>
      <!-- 左上 -->
      <image mode="aspectFill" src="{{Cimg}}" style='width:100rpx;height:100rpx;position:absolute;left:75rpx;top:{{Cimgtop}}rpx;'></image>
      <!-- 左下 -->
      <image mode="aspectFill" src="{{Cimg}}" style='transform:rotate(-90deg);width:100rpx;height:100rpx;position:absolute;left:75rpx;top:{{Cimgtop+550}}rpx;'></image>
      <!-- 右上 -->
      <image mode="aspectFill" src="{{Cimg}}" style='transform:rotate(90deg);width:100rpx;height:100rpx;position:absolute;left:375rpx;top:{{Cimgtop}}rpx;'></image>
      <!-- 右下 -->
      <image mode="aspectFill" src="{{Cimg}}" style='transform:rotate(180deg);width:100rpx;height:100rpx;position:absolute;left:375rpx;top:{{Cimgtop+550}}rpx;'></image>
    </view>
  </block>

  <block wx:else>
    <image mode="aspectFill" src="{{Pimg}}" style='width:750rpx;height:750rpx;position:absolute;bottom:50rpx;'></image>
  </block>

</view>


<view class="bottom">

  <!-- 选择栏 -->
  <!-- 
    同时显示滑块的数量 display-multiple-items ，可以为小数
    禁止外部swiper手指触摸滑动 stopTouchMove
    aspectFit	保持纵横比缩放图片，使图片的长边能完全显示出来。也就是说，可以完整地将图片显示出来。
    swiper-item 添加 padding-right:5px 尾部会不能到底
    previous-margin="15rpx" next-margin="15rpx"

    问题：选择带框后，下一个tab会默认带框【解决：改变动画时长 duration="100"】
  -->
  <block wx:if="{{production == 'C'}}">
    <swiper current="{{indexb}}" vertical="true" duration="100" style="height:150rpx;">
      <swiper-item wx:for="{{carpet}}" style="background:#ffffff;" catchtouchmove="stopTouchMove">
        <view style="height:150rpx;">

          <swiper current="0" display-multiple-items="5">
            <swiper-item wx:for="{{imgURL}}" style="height:120rpx;margin:15rpx 18rpx;">
              <view style="height:120rpx;">
                <image src="{{item}}" data-num="{{index}}" bindtap='swipclick' mode="aspectFit" style="width:120rpx;height:120rpx;" class="{{select==index?'border':''}}" />
              </view>
            </swiper-item>
          </swiper>

        </view>
      </swiper-item>
    </swiper>
  </block>

  <block wx:else>
    <swiper current="{{indexb}}" vertical="true" duration="100" style="height:150rpx;">
      <swiper-item wx:for="{{bag}}" style="background:#ffffff;" catchtouchmove="stopTouchMove">
        <view style="height:150rpx;">

          <swiper current="0" display-multiple-items="5">
            <swiper-item wx:for="{{imgURL}}" style="height:120rpx;margin:15rpx 18rpx;">
              <view style=" height:120rpx;">
                <image src="{{item}}" data-num="{{index}}" bindtap='swipclick' mode="aspectFit " style="width:120rpx;height:120rpx;" class="{{select==index?'border':''}}" />
              </view>
            </swiper-item>
          </swiper>

        </view>
      </swiper-item>
    </swiper>
  </block>

  <!-- 按钮：地毯（边框，四角，中心）；布包（图案，颜色） -->
  <!-- 
  注意：data-current="{{index}} "
  问题： 
    1.背景图片不能缩放  background:{{item.color}} url('{{item.url}}') no-repeat center center;color:#ffffff;background-size：50px 30px;
    2.图片不能显示 img 被挤下去了
    3.view 点击hover-class 无效【解决：样式 加 !important】，但点击完后回原色
    4.border-left:1px solid black 一个不见
  -->
  <block wx:if="{{production == 'C'}}">
    <scroll-view scroll-x style="height:60rpx;width:100%;">
      <view wx:for="{{carpet}}" style="width:33.3%;display:inline-block;">
        <button bindtap='changeview' style="height:60rpx;text-align:center;line-height:60rpx;background:{{index==indexb? '#550508' : '#a28081'}};color:#ffffff;border-left:1px solid black;border-right:1px solid black" data-current="{{index}}">{{item.name}}</button>
      </view>
    </scroll-view>
  </block>

  <block wx:else>
    <scroll-view scroll-x style="height:60rpx;width:100%;">
      <view wx:for="{{bag}}" style="width:50%;display:inline-block;">
        <button bindtap='changeview' style="height:60rpx;text-align:center;line-height:60rpx;background:{{index==indexb? '#550508' : '#a28081'}};color:#ffffff;border-left:1px solid black;border-right:1px solid black" data-current="{{index}}">{{item.name}}</button>
      </view>
    </scroll-view>
  </block>

  <!-- 确认按钮：展示结果图-->
  <view style="height:60rpx;width:100%;">
    <button bindtap='enablebt' style="background:{{enablecolor==true?'#550508':'#e0e0e0'}} url('{{autoimg}}') no-repeat center center">自动生成</button>
  </view>

</view>